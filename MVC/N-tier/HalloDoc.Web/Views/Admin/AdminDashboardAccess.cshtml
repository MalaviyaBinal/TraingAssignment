@model IEnumerable<HalloDocWebEntity.Data.Role>
@{
    Layout = "_AdminHeader";
}
<div class="container p-0">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between mt-3">
                <h4 class="mt-3">Account Access</h4>
            </div>
        </div>
    </div>
</div>
<div class="container  bg-white rounded shadow ">
    <div class="row pt-3 ps-2 pb-3">
        <div class="col text-end">
            <a asp-action="CreateRole" asp-controller="Admin">
                <button class="btn btn-white border-info text-info me-3">
                    Create Access
                </button>
            </a>
        </div>
    </div>
    <table class="table hideOnMobile">
        <thead>
            <tr class="bg-light text-muted h-100">
                <th scope="col">Name</th>
                <th scope="col">Account Type</th>
                <th scope="col" class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody class="text-muted">
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Name</td>
                    @switch (item.Accounttype)
                    {
                        case 1:
                            <td>Admin</td>
                            break;
                        case 2:
                            <td>Physician</td>
                            break;
                        case 0:
                            <td>All</td>
                            break;
                    }
                    <td class="text-center">
                        <a asp-action="EditRole" asp-controller="Admin" asp-route-id="@item.Roleid"><button type="button" class="btn btn-outline-info">Edit</button></a>
                        <button type="button" onclick="deleteaccess(this)" value="@item.Roleid" class="btn btn-outline-info">Delete</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="d-md-none border-bottom">
        @foreach (var item in Model)
        {
            <div class="border-bottom px-2" id="accordiancolor">
                <div class="my-2">
                    <div class="my-1">Name: <strong>@item.Name</strong></div>
                    <div class="my-1">
                        Account Type:
                        @switch (item.Accounttype)
                        {
                            case 1:
                                <span>Admin</span>
                                break;
                            case 2:
                                <span>Physician</span>
                                break;
                            case 0:
                                <span>All</span>
                                break;
                        }
                    </div>
                    <div class="my-1">
                        <a asp-action="EditRole" asp-controller="Admin" asp-route-id="@item.Roleid"><button type="button" class="btn btn-outline-info">Edit</button></a>
                        <button type="button" onclick="deleteaccess(this)" value="@item.Roleid" class="btn btn-outline-info">Delete</button>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<div id="modalpopup">
</div>
<script>
    document.getElementById("access1").classList.add("active");
    function deleteaccess(element) {
        var id = element.value;
        console.log(id);
        $.ajax({
            url: "/Admin/ShowDeleteModal",
            data: { 'id': id, 'acntType': "AccessRole" },
            type: "GET",
            dataType: "html",
            success: function (data) {
                $("#modalpopup").html(data);
            },
            error: function () {
                alert("No Projects Found");
            }
        });
    };
</script>
