@model HalloDocWebEntity.ViewModel.AdminPartnersModel
@{
    Layout = "_AdminHeader";
}
<div class="container my-5">
    <div class="row d-flex">
        <div class="col-6">
            <div class="h3">Vendor(s)</div>
        </div>
    </div>
    <div class="container bg-white rounded shadow">
        <div class="row">
            <div class="col-sm-12 col-md-4 col-xl-4 my-3 form-floating  text-muted">
                <input name="VendorName" type="text" class="form-control" id="VendorName" placeholder="Patient Name">
                <label for="VendorName" class="form-label ms-2">Search Vendor</label>
            </div>
            <div class=" col-sm-12 col-md-4 col-xl-4  my-3 ">
                <select class="form-select p-3" id="RegionSelect" aria-label="form-select-lg example" onchange="GetVendorData()" asp-for=SelectedRegion>
                    <option value="0">All</option>
                    @foreach (var i in Model.professions)
                    {
                        <option value="@i.Healthprofessionalid">@i.Professionname</option>
                    }
                </select>

            </div>
            <div class=" col-sm-12 col-md-4 col-xl-4 text-end  my-4">
                <a asp-action="AddVendor" class="btn border border-info text-info">
                    <i class="fa-solid fa-plus" style="color: #74C0FC;"></i>Add Business
                </a>
            </div>

        </div>
        <div id="tableContent"></div>
    </div>
</div>
<div id="modalpopup">
</div>
<script>
    document.getElementById("partners").classList.add("active");
    $("#VendorName").change(function (e) {
        var reg = $("#VendorName").val();
        var searchstr = document.getElementById("VendorName").value
        MyAJax(reg, 1, searchstr);
    })
    function MyAJax(reg, pagenumber, searchstr) {
        $.ajax({
            url: "/Admin/_VendorList",
            type: "GET",
            data: { reg: reg, pagenumber: pagenumber, searchstr: searchstr },
            dataType: "html",
            success: function (data) {
                $("#tableContent").html(data);
            },
            error: function () {
                alert("No Projects Found");
                $("#tableContent").html('An error has occurred');
            }
        });
    }
    function deleteaccess(element) {

        var id = element.value;

        $.ajax({
            url: "/Admin/ShowDeleteModal",
            data: { 'id': id, 'acntType': "Vender" },
            type: "GET",
            dataType: "html",
            success: function (data) {

                $("#modalpopup").html(data);

            },
            error: function () {
                alert("No Projects Found");

            }
        });
    };
</script>
<script>
    $(document).ready(function () {
        MyAJax(0, 1, null);
    });
</script>
<script>
    function GetVendorData(pagenumber) {

        if (pagenumber == 0) {
            pagenumber = @Model.CurrentPage;
        }
        var reg = $("#RegionSelect").val();

        MyAJax(reg, pagenumber);
    }
</script>